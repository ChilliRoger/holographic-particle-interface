<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Holographic Particle Interface</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            overflow: hidden;
            background: #000;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #fff;
        }

        #canvas {
            display: block;
            width: 100vw;
            height: 100vh;
        }

        #ui-overlay {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 10;
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(0, 255, 255, 0.3);
            font-size: 14px;
            transition: opacity 0.3s;
        }

        #ui-overlay.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .ui-item {
            margin: 8px 0;
            display: flex;
            align-items: center;
        }

        .ui-label {
            color: #0ff;
            margin-right: 10px;
            min-width: 100px;
        }

        .ui-value {
            color: #fff;
        }

        #model-selector {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 10;
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(0, 255, 255, 0.3);
            max-width: 300px;
        }

        .model-btn {
            background: rgba(0, 255, 255, 0.2);
            border: 1px solid #0ff;
            color: #0ff;
            padding: 10px 15px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 12px;
        }

        .model-btn:hover {
            background: rgba(0, 255, 255, 0.4);
            transform: scale(1.05);
        }

        .model-btn.active {
            background: rgba(0, 255, 255, 0.6);
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
        }

        #gesture-indicator {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60px;
            height: 60px;
            border: 3px solid rgba(0, 255, 255, 0.6);
            border-radius: 50%;
            pointer-events: none;
            display: none;
            box-shadow: 0 0 30px rgba(0, 255, 255, 0.8);
        }

        #gesture-indicator.active {
            display: block;
        }

        #webcam-preview {
            position: fixed;
            bottom: 20px;
            left: 20px;
            width: 200px;
            height: 150px;
            border: 2px solid rgba(0, 255, 255, 0.3);
            border-radius: 10px;
            display: none;
            z-index: 10;
        }

        #webcam-preview.active {
            display: block;
        }

        #tutorial {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.95);
            padding: 40px;
            border-radius: 15px;
            border: 2px solid #0ff;
            max-width: 600px;
            z-index: 100;
            display: none;
            max-height: 90vh;
            overflow-y: auto;
        }

        #tutorial.active {
            display: block;
        }

        #tutorial h2 {
            color: #0ff;
            margin-bottom: 20px;
            text-align: center;
        }

        #tutorial ul {
            list-style: none;
            margin: 20px 0;
        }

        #tutorial li {
            margin: 10px 0;
            padding-left: 20px;
        }

        #tutorial button {
            background: #0ff;
            color: #000;
            border: none;
            padding: 12px 30px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            width: 100%;
            margin-top: 20px;
            font-size: 16px;
        }

        #tutorial button:hover {
            background: #0dd;
        }
        
        .close-tutorial {
            position: absolute;
            top: 10px;
            right: 10px;
            background: transparent;
            border: 2px solid #0ff;
            color: #0ff;
            width: 35px !important;
            height: 35px;
            padding: 0 !important;
            font-size: 24px;
            line-height: 30px;
            cursor: pointer;
            border-radius: 50%;
            text-align: center;
        }
        
        .close-tutorial:hover {
            background: rgba(0, 255, 255, 0.2);
        }

        #loading {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #0ff;
            font-size: 24px;
            z-index: 1000;
        }

        .gesture-info {
            font-size: 12px;
            color: #0ff;
            margin-top: 10px;
        }

        #settings-panel {
            position: fixed;
            top: 50%;
            right: 20px;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.9);
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #0ff;
            z-index: 100;
            display: none;
            max-width: 300px;
        }

        #settings-panel h3 {
            color: #0ff;
            margin-bottom: 15px;
            text-align: center;
        }

        .setting-group {
            margin: 15px 0;
        }

        .setting-label {
            color: #fff;
            display: block;
            margin-bottom: 5px;
            font-size: 14px;
        }

        .setting-group input[type="range"] {
            width: 100%;
            margin: 5px 0;
        }

        .setting-group select {
            width: 100%;
            padding: 8px;
            background: rgba(0, 255, 255, 0.2);
            border: 1px solid #0ff;
            color: #0ff;
            border-radius: 5px;
            font-size: 14px;
        }

        .setting-group button {
            width: 100%;
            padding: 10px;
            background: rgba(0, 255, 255, 0.3);
            border: 1px solid #0ff;
            color: #0ff;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            margin-top: 5px;
        }

        .setting-group button:hover {
            background: rgba(0, 255, 255, 0.5);
        }

        .value-display {
            color: #0ff;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    
    <div id="loading">Loading Holographic Interface...</div>
    
    <div id="ui-overlay">
        <div class="ui-item">
            <span class="ui-label">Mode:</span>
            <span class="ui-value" id="mode-display">Cursor</span>
        </div>
        <div class="ui-item">
            <span class="ui-label">Hologram:</span>
            <span class="ui-value" id="model-display">None</span>
        </div>
        <div class="ui-item">
            <span class="ui-label">Particles:</span>
            <span class="ui-value" id="particle-count">2000</span>
        </div>
        <div class="ui-item">
            <span class="ui-label">FPS:</span>
            <span class="ui-value" id="fps-display">60</span>
        </div>
        <div class="gesture-info">
            Press 'H' to hide UI<br>
            Press 'T' for tutorial<br>
            Press 'G' to toggle gesture mode<br>
            Press 'S' for settings
        </div>
    </div>

    <div id="model-selector">
        <button class="model-btn" data-model="tree">üå≥ Tree</button>
        <button class="model-btn" data-model="car">üöó Car</button>
        <button class="model-btn" data-model="airplane">‚úàÔ∏è Airplane</button>
        <button class="model-btn" data-model="human">üßç Human</button>
        <button class="model-btn" data-model="cube">üì¶ Cube</button>
        <button class="model-btn" data-model="sphere">‚ö™ Sphere</button>
        <button class="model-btn" data-model="dna">üß¨ DNA</button>
        <button class="model-btn" data-model="heart">‚ù§Ô∏è Heart</button>
        <button class="model-btn" data-model="house">üè† House</button>
        <button class="model-btn" data-model="laptop">üíª Laptop</button>
        <button class="model-btn" data-model="draw">‚úèÔ∏è Draw</button>
        <button class="model-btn" data-model="free">üé® Free Mode</button>
    </div>

    <div id="settings-panel">
        <h3>‚öôÔ∏è Settings</h3>
        
        <div class="setting-group">
            <label class="setting-label">
                Particle Count: <span class="value-display" id="particle-value">2000</span>
            </label>
            <input type="range" id="particle-slider" min="500" max="5000" step="100" value="2000">
        </div>
        
        <div class="setting-group">
            <label class="setting-label">
                Sensitivity: <span class="value-display" id="sensitivity-value">1.0</span>
            </label>
            <input type="range" id="sensitivity-slider" min="0.1" max="3.0" step="0.1" value="1.0">
        </div>
        
        <div class="setting-group">
            <label class="setting-label">Color Scheme</label>
            <select id="color-scheme">
                <option value="cyan">Cyan (Default)</option>
                <option value="purple">Purple</option>
                <option value="green">Green</option>
                <option value="red">Red</option>
                <option value="white">White</option>
            </select>
        </div>
        
        <div class="setting-group">
            <label class="setting-label">Save Current Formation</label>
            <button id="save-design-btn">üíæ Save Design</button>
        </div>
        
        <div class="setting-group">
            <label class="setting-label">Load Saved Design</label>
            <select id="saved-designs-select">
                <option value="">-- Load Design --</option>
            </select>
        </div>
    </div>

    <div id="gesture-indicator"></div>
    <video id="webcam-preview" autoplay playsinline></video>

    <div id="tutorial">
        <button class="close-tutorial" onclick="closeTutorial()" title="Close Tutorial">√ó</button>
        <h2>üåü Holographic Particle Interface</h2>
        <h3>Keyboard Controls:</h3>
        <ul>
            <li>üî¢ <strong>1-8:</strong> Select hologram preset</li>
            <li>üî¢ <strong>0:</strong> Enter draw mode</li>
            <li>‚¨ÜÔ∏è <strong>Arrow Keys:</strong> Rotate hologram</li>
            <li>üîÑ <strong>Spacebar:</strong> Toggle formation mode</li>
            <li>üîÅ <strong>R:</strong> Reset particles</li>
            <li>‚öôÔ∏è <strong>S:</strong> Toggle settings panel</li>
            <li>üéÆ <strong>G:</strong> Toggle gesture control</li>
            <li>üóëÔ∏è <strong>C:</strong> Clear drawing (in draw mode)</li>
            <li>üëÅÔ∏è <strong>H:</strong> Hide/show UI</li>
        </ul>
        <h3>Mouse Controls:</h3>
        <ul>
            <li>üñ±Ô∏è Move mouse to attract particles</li>
            <li>üñ±Ô∏è Click & drag to manipulate</li>
            <li>üñ±Ô∏è In draw mode: Click & drag to draw 3D paths</li>
            <li>üé° Scroll wheel to zoom</li>
        </ul>
        <h3>Gesture Controls (when enabled):</h3>
        <ul>
            <li>‚úã <strong>Open Palm:</strong> Attract particles</li>
            <li>‚úä <strong>Closed Fist:</strong> Push particles away</li>
            <li>üëå <strong>Pinch:</strong> Grab and drag</li>
            <li>‚úåÔ∏è <strong>Peace Sign:</strong> Rotate hologram</li>
            <li>üëç <strong>Thumbs Up:</strong> Zoom in</li>
            <li>üëé <strong>Thumbs Down:</strong> Zoom out</li>
            <li>üëã <strong>Swipe Left/Right:</strong> Switch holograms</li>
        </ul>
        <button onclick="closeTutorial()">Got it!</button>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
    <script src="{{ url_for('static', filename='app.js') }}"></script>
</body>
</html>